async function fetchRelatedWords(t,e){let o=[];for(let r of t){r=encodeURIComponent(r.trim());let d=`https://api.datamuse.com/words?ml=${r}&max=${e}`;try{let a=await fetch(d);if(a.ok){let n=await a.json();for(let l of n)l.word.includes(" ")||o.push(l.word)}}catch(i){console.error("Error fetching related words:",i)}}return o.sort(()=>Math.random()-.5),o}function displayRelatedWords(t,e){let o=document.getElementById("results");o.innerHTML=`<div class="container"><p>Related words for '${t.join(", ")}':</p><table>${e.map(t=>` <tr> <td class="border border-dark">${t}</td> <td class="border border-dark generate-btn" data-word="${t}">Generate Related Words</td> <td> <button class="mx-2 py-0 btn border-dark copy-btn2" data-clipboard-text="${t}">Copy</button> </td> </tr>`).join("")}</table><button class="border-dark btn copy-btn" data-clipboard-text="${e.join("\n")}">Copy All</button></div>`,setupClipboard();let r=o.querySelector(".copy-btn"),d=new ClipboardJS(r);d.on("success",function(t){r.textContent="Copied!",r.classList.add("copied"),setTimeout(()=>{r.textContent="Copy All",r.classList.remove("copied")},3e3)}),d.on("error",function(t){console.error("Clipboard error:",t)});let a=o.querySelectorAll(".generate-btn");a.forEach(t=>{t.addEventListener("click",async t=>{let e=t.target.getAttribute("data-word");showLoadingIndicator();let o=await fetchRelatedWords([e],10);hideLoadingIndicator(),displayGeneratedWords(e,o)})})}function displayGeneratedWords(t,e){let o=document.getElementById("results"),r=document.createElement("div");r.innerHTML=`<div class="container"><p>Related words for '${t}':</p><table>${e.map(t=>`<tr> <td class="border border-dark">${t}</td> <td class="border border-dark generate-btn" data-word="${t}">Generate Related Words</td> <td> <button class="mx-2 py-0 btn border-dark copy-btn2" data-clipboard-text="${t}">Copy</button> </td> </tr>`).join("")}</table><button class="border-dark btn copy-btn" data-clipboard-text="${e.join("\n")}">Copy All</button></div>`,o.appendChild(r),setupClipboard();let d=r.querySelector(".copy-btn"),a=new ClipboardJS(d);a.on("success",function(t){d.textContent="Copied!",d.classList.add("copied"),setTimeout(()=>{d.textContent="Copy All",d.classList.remove("copied")},3e3)}),a.on("error",function(t){console.error("Clipboard error:",t)});let n=r.querySelectorAll(".generate-btn");n.forEach(t=>{t.addEventListener("click",async t=>{let e=t.target.getAttribute("data-word");showLoadingIndicator();let o=await fetchRelatedWords([e],10);hideLoadingIndicator(),displayGeneratedWords(e,o)})})}function setupClipboard(){let t=document.querySelectorAll(".copy-btn2");t.forEach(t=>{let e=new ClipboardJS(t);e.on("success",function(e){t.textContent="Copied!",t.classList.add("copied"),setTimeout(()=>{t.textContent="Copy",t.classList.remove("copied")},3e3)}),e.on("error",function(t){console.error("Clipboard error:",t)})})}function showLoadingIndicator(){let t=document.getElementById("loading-indicator");t.classList.add("loading")}function hideLoadingIndicator(){let t=document.getElementById("loading-indicator");t.classList.remove("loading")}function getSearchParams(){let t=new URLSearchParams(window.location.search);return t.get("search")}document.addEventListener("DOMContentLoaded",async()=>{let t=getSearchParams();if(t){let e=t.split(",").map(t=>t.trim()).slice(0,100);showLoadingIndicator();let o=await fetchRelatedWords(e,10);hideLoadingIndicator(),displayRelatedWords(e,o)}});
